---
title: 读书笔记《Linux Server Hacks》卷二
tags:
  - Book
  - Linux
url: 929.html
id: 929
categories:
  - 每周分享
date: 2019-05-06 22:31:52
---

前
-

> 如果一台服务器正在运行,但是没有客户端,那么他真的在运行吗

这本书是前面的那本的后续，感觉第二卷没卷一那么精彩了，里面自己接触到的有用的东西没有那么多了。

快速禁止所有用户登陆
----------

    touch /etc/nologin

这样只能从本地的 SSH 进行登陆了

Screen
------

很好的工具，用着用着到没用上了，这里复习一下。

给screen 而不是shell 发送命令的组合键是 `ctrl`+`A`，命令查询使用 `ctrl`+`A`+`?`。 使用 `screen -S <name>` 来打开一个命名会话。使用 `screen -r <name>` 来实现会话的恢复。

使用 script 进行录屏
--------------

使用 script 来进行命令行的录屏，可以记录和显示所有的键入操作。 使用 `script -t 2>rec` 来开始一个 script 的记录会话。使用 `-t` 重定向时间输出到标准错误，并且重定向到 rec文件。开始录制，录制过程使用 `exit` 来进行退出。

当需要进行回放的时候，使用 `scriptreplay rec` 来进行一系列操作的回放。

快速编译
----

为了尽可能多的使用CPU资源，`make -j` 指定编译进程数的时候，数值一般为CPU数量的两倍加1。

sysctl
------

使用 **sysctl** 来快速的进行内核的参数设置，**应避免直接和/proc进行交互**。`/proc/sys` 下面的为sysctl 的接口。 使用 `sysctl -a` 查看所有的可用设置。

后
-

没错这次就是这么短，感觉干货没有卷一次那么多了，所以就是找了自己觉得有用的部分来记了下来。可能大多数都是没有接触到的，或者有些老了的技术吧。