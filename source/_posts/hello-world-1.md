---
title: 博客搬家动态站
tags:
  - 服务日志
url: 1.html
id: 1
categories:
  - 日记？
date: 2019-03-29 16:40:12
---

前面的话
----

这篇文章是后面补的，因为怕自己后面忘了这件事了，所以把这个日期也顺便更新一下吧。

想想，发现博客这也是第二次迁移了，从最开始的自己在CSDN上傻傻的写（这段历史就忽略掉了，傻fufu的），到后来就用了 GitPage 来托管自己的博客的静态页面，看了看[第一篇文章](http://quartz010.github.io/2017/11/17/STM32F1x/) 发布在 `2017-11-17` 大体上也就是一年半前了。不知不觉走了很远也堆了一大堆有用没用的文章。回头看看大多数都是技术相关的东西吧，（很多时候还是想谢谢感想吐吐槽，但是在这有光无光的角落里，还是不怎么想写）。

所以，博客嘛，还是以自己折腾的东西为主了，都是自己在平常遇到的一下问题，或者方案的记录，如果有帮到大家，就再好不过。

为什么换平台呢
-------

在这之前，一直用的是hexo结合GitPage来进行静态的博客发布的。后面，慢慢发现发布的方式太过于繁琐了（虽然文章都在电脑里，直接`hexo g d` 就差不多OK了），每次，到处写，最后拿出电脑来发布。“少折腾提高幸福感” 又或是 自己真的老了。

对于这种发布方式，自己也想过，直接用webhook，上Git 自动发布吧。后面，觉得将算是这样，每个设备在写作之前，还需要进行一个 `pull` ,可能这种繁琐的细节自己不能忍吧。（ofo和小蓝单车的区别？），最后也就没成。

* * *

所以，最后的最后就想，那就不要静态博客了，自己搭吧！

为什么 WP 呢
--------

上面决定自己搭一个的想法后，自己也做了蛮多的功课，得选一个合适的CMS。**（由于底层完全是用Docker跑起来的，所以对选择本身 是有较大影响的）**。

WP 本身提供了较完整的 image，基本可是实现一个 compose文件，就可以完成部署。而 **typecho** 网上很少有见到docker部署，所以自己就研究了一番，整出了 compose ，并且也好好的体验一番。

用了之后，发现，typecho 对我来说**太轻了**，比如一个插件的安装，或者一个主题的切换对应用户来说，需要自己在文件目录里面进行配置。虽然本身没有什么难度。但是对于常用功能都如此hack的过程，作为我来说很难接受。**因为，我觉得长久的东西需要是一个稳定的东西**，也如《人月》里写道，最好的软件开发的方法就是自己不开发任何组件（可能没有原文那么标准）。另外，由于整个的站点跑在 Docker上，对于配置文件的修改，需要挂上卷之后才可以进行持久化。为了避免一次次的 `docker --exec` 我选择了稳定。

* * *

虽然很多人说，WP对于自己的一个博客的发布是不是显得太冗余了。答案其实不尽然，装上自己需要的几个插件，随时随地的写写博客，反而显得比较安静和贴心。对于实用向的笔者来说，感觉这些东西已经够了。

关于服务器
-----

（这篇文章是后面再补上去的）所以在另一次迁移之前，是使用的自己的本地主机进行部署的。（有自己的服务器，看得见摸得着，可能是一些hack的小梦想），所以部署的主机环境呢是 `2*D525 工控主板 2G + 16G SSD` 可见这里的配置已经是相当的乞丐了。

对站点进行压测 **QPS在8 reqs/s**，ummm 这个配置就是玩玩啦，拿来搭服务器刚刚好。另外，为何是两台主机，关键在于，这里实际上是跑了 `Docker-Swarm` 的集群，（毕竟服务都是用容器跑上去的），两主机之间通过 NFS来进行文件卷的共享。内网环境的问题，由于主机是在本地，没有公网环境的，所以这里只能拿内网穿透，来吧443 给映射出去。

所以整站在这个环境下，也就只能是基本能用的状态了。不过基本能用已经是很开心了。